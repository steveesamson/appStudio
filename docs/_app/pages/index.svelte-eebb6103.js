var ls=Object.defineProperty,hs=Object.defineProperties;var fs=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var vt=(n,e,t)=>e in n?ls(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||(e={}))_t.call(e,t)&&vt(n,t,e[t]);if($e)for(var t of $e(e))bt.call(e,t)&&vt(n,t,e[t]);return n},ne=(n,e)=>hs(n,fs(e));var wt=(n,e)=>{var t={};for(var s in n)_t.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&$e)for(var s of $e(n))e.indexOf(s)<0&&bt.call(n,s)&&(t[s]=n[s]);return t};import{K as Ne,S as pe,i as ye,s as me,L as T,M as O,a as E,d as g,b as u,g as q,J as I,E as te,l as K,N as ve,O as _e,k as lt,m as ht,P as W,Q as kt,t as Ut,w as be,h as Dt,x as we,y as ke,j as Ft,R as Et,q as Q,o as se,B as Ee,T as ds,v as Ye,n as ft,U as ps,V as ys,p as dt,e as Ze,c as et,W as ms}from"../chunks/index-59b77f56.js";import{w as zt}from"../chunks/index-a090f68d.js";function gs(n){if(n.__esModule)return n;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(t){var s=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:function(){return n[t]}})}),e}var vs=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],tt=function(e){var t=e,s=e.indexOf("["),r=e.indexOf("]");s!=-1&&r!=-1&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=vs.exec(e||""),o={},c=14;c--;)o[_s[c]]=i[c]||"";return s!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=bs(o,o.path),o.queryKey=ws(o,o.query),o};function bs(n,e){var t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&s.splice(0,1),e.substr(e.length-1,1)=="/"&&s.splice(s.length-1,1),s}function ws(n,e){var t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,i){r&&(t[r]=i)}),t}function ks(n,e="",t){let s=n;t=t||typeof location!="undefined"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t!="undefined"?n=t.protocol+"//"+n:n="https://"+n),s=tt(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+e,s.href=s.protocol+"://"+i+(t&&t.port===s.port?"":":"+s.port),s}var st={exports:{}};try{st.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{st.exports=!1}var Es=st.exports,he=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function Ht(n){const e=n.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Es))return new XMLHttpRequest}catch{}if(!e)try{return new he[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Vt(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const xs=setTimeout,Cs=clearTimeout;function Ke(n,e){e.useNativeTimers?(n.setTimeoutFn=xs.bind(he),n.clearTimeoutFn=Cs.bind(he)):(n.setTimeoutFn=setTimeout.bind(he),n.clearTimeoutFn=clearTimeout.bind(he))}var xe=Y;function Y(n){if(n)return As(n)}function As(n){for(var e in Y.prototype)n[e]=Y.prototype[e];return n}Y.prototype.on=Y.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Y.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Y.prototype.off=Y.prototype.removeListener=Y.prototype.removeAllListeners=Y.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Y.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};Y.prototype.emitReserved=Y.prototype.emit;Y.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Y.prototype.hasListeners=function(n){return!!this.listeners(n).length};const ie=Object.create(null);ie.open="0";ie.close="1";ie.ping="2";ie.pong="3";ie.message="4";ie.upgrade="5";ie.noop="6";const De=Object.create(null);Object.keys(ie).forEach(n=>{De[ie[n]]=n});const Ts={type:"error",data:"parser error"},Os=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bs=typeof ArrayBuffer=="function",Rs=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,jt=({type:n,data:e},t,s)=>Os&&e instanceof Blob?t?s(e):xt(e,s):Bs&&(e instanceof ArrayBuffer||Rs(e))?t?s(e):xt(new Blob([e]),s):s(ie[n]+(e||"")),xt=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+s)},t.readAsDataURL(n)};var Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Be=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var Me=0;Me<Ct.length;Me++)Be[Ct.charCodeAt(Me)]=Me;var Ns=function(n){var e=n.length*.75,t=n.length,s,r=0,i,o,c,a;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var d=new ArrayBuffer(e),h=new Uint8Array(d);for(s=0;s<t;s+=4)i=Be[n.charCodeAt(s)],o=Be[n.charCodeAt(s+1)],c=Be[n.charCodeAt(s+2)],a=Be[n.charCodeAt(s+3)],h[r++]=i<<2|o>>4,h[r++]=(o&15)<<4|c>>2,h[r++]=(c&3)<<6|a&63;return d};const Ss=typeof ArrayBuffer=="function",Yt=(n,e)=>{if(typeof n!="string")return{type:"message",data:Kt(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Ls(n.substring(1),e)}:De[t]?n.length>1?{type:De[t],data:n.substring(1)}:{type:De[t]}:Ts},Ls=(n,e)=>{if(Ss){const t=Ns(n);return Kt(t,e)}else return{base64:!0,data:n}},Kt=(n,e)=>{switch(e){case"blob":return n instanceof ArrayBuffer?new Blob([n]):n;case"arraybuffer":default:return n}},Wt=String.fromCharCode(30),Is=(n,e)=>{const t=n.length,s=new Array(t);let r=0;n.forEach((i,o)=>{jt(i,!1,c=>{s[o]=c,++r===t&&e(s.join(Wt))})})},Ps=(n,e)=>{const t=n.split(Wt),s=[];for(let r=0;r<t.length;r++){const i=Yt(t[r],e);if(s.push(i),i.type==="error")break}return s},Jt=4;class Xt extends xe{constructor(e){super(),this.writable=!1,Ke(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const s=new Error(e);return s.type="TransportError",s.description=t,super.emit("error",s),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){const t=Yt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}}var Qt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),He=64,Gt={},At=0,fe=0,Tt;function nt(n){var e="";do e=Qt[n%He]+e,n=Math.floor(n/He);while(n>0);return e}function $s(n){var e=0;for(fe=0;fe<n.length;fe++)e=e*He+Gt[n.charAt(fe)];return e}function pt(){var n=nt(+new Date);return n!==Tt?(At=0,Tt=n):n+"."+nt(At++)}for(;fe<He;fe++)Gt[Qt[fe]]=fe;pt.encode=nt;pt.decode=$s;var Zt=pt,Ie={};Ie.encode=function(n){var e="";for(var t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e};Ie.decode=function(n){for(var e={},t=n.split("&"),s=0,r=t.length;s<r;s++){var i=t[s].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e};class Ms extends Xt{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose(),!1;this.onPacket(s)};Ps(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Is(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Zt()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const r=Ie.encode(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}}function qs(){}const Us=function(){return new Ht({xdomain:!1}).responseType!=null}();class Ds extends Ms{constructor(e){if(super(e),typeof location!="undefined"){const s=location.protocol==="https:";let r=location.port;r||(r=s?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==s}const t=e&&e.forceBase64;this.supportsBinary=Us&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new re(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",r=>{this.onError("xhr post error",r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",t=>{this.onError("xhr poll error",t)}),this.pollXhr=e}}class re extends xe{constructor(e,t){super(),Ke(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=Vt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new Ht(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&t.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document!="undefined"&&(this.index=re.requestsCount++,re.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=qs,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete re.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&this.onData(e)}abort(){this.cleanup()}}re.requestsCount=0;re.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Ot);else if(typeof addEventListener=="function"){const n="onpagehide"in he?"pagehide":"unload";addEventListener(n,Ot,!1)}}function Ot(){for(let n in re.requests)re.requests.hasOwnProperty(n)&&re.requests[n].abort()}const Fs=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),Te=he.WebSocket||he.MozWebSocket,Bt=!0,zs="arraybuffer",Rt=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yt extends Xt{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=Rt?{}:Vt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Bt&&!Rt?t?new Te(e,t):new Te(e):new Te(e,t,s)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||zs,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;jt(s,this.supportsBinary,i=>{const o={};try{Bt&&this.ws.send(i)}catch{}r&&Fs(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Zt()),this.supportsBinary||(e.b64=1);const r=Ie.encode(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}check(){return!!Te&&!("__initialize"in Te&&this.name===yt.prototype.name)}}const Hs={websocket:yt,polling:Ds};class ce extends xe{constructor(e,t={}){super(),e&&typeof e=="object"&&(t=e,e=null),e?(e=tt(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=tt(t.host).host),Ke(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Ie.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Vs(this.opts.query);t.EIO=Jt,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Hs[e](s)}open(){let e;if(this.opts.rememberUpgrade&&ce.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){let t=this.createTransport(e),s=!1;ce.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",l=>{if(!s)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ce.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(h(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=t.name,this.emitReserved("upgradeError",v)}}))};function i(){s||(s=!0,h(),t.close(),t=null)}const o=l=>{const v=new Error("probe error: "+l);v.transport=t.name,i(),this.emitReserved("upgradeError",v)};function c(){o("transport closed")}function a(){o("socket closed")}function d(l){t&&l.name!==t.name&&i()}const h=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",c),this.off("close",a),this.off("upgrading",d)};t.once("open",r),t.once("error",o),t.once("close",c),this.once("close",a),this.once("upgrading",d),t.open()}onOpen(){if(this.readyState="open",ce.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:e,data:t,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){ce.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const r=e.length;for(;s<r;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}ce.protocol=Jt;function Vs(n){const e={};for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}ce.protocol;const js=typeof ArrayBuffer=="function",Ys=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,es=Object.prototype.toString,Ks=typeof Blob=="function"||typeof Blob!="undefined"&&es.call(Blob)==="[object BlobConstructor]",Ws=typeof File=="function"||typeof File!="undefined"&&es.call(File)==="[object FileConstructor]";function mt(n){return js&&(n instanceof ArrayBuffer||Ys(n))||Ks&&n instanceof Blob||Ws&&n instanceof File}function Fe(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(Fe(n[t]))return!0;return!1}if(mt(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Fe(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Fe(n[t]))return!0;return!1}function Js(n){const e=[],t=n.data,s=n;return s.data=rt(t,e),s.attachments=e.length,{packet:s,buffers:e}}function rt(n,e){if(!n)return n;if(mt(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=rt(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=rt(n[s],e));return t}return n}function Xs(n,e){return n.data=it(n.data,e),n.attachments=void 0,n}function it(n,e){if(!n)return n;if(n&&n._placeholder)return e[n.num];if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=it(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=it(n[t],e));return n}const Qs=5;var B;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(B||(B={}));class Gs{encode(e){return(e.type===B.EVENT||e.type===B.ACK)&&Fe(e)?(e.type=e.type===B.EVENT?B.BINARY_EVENT:B.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===B.BINARY_EVENT||e.type===B.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data)),t}encodeAsBinary(e){const t=Js(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}class gt extends xe{constructor(){super()}add(e){let t;if(typeof e=="string")t=this.decodeString(e),t.type===B.BINARY_EVENT||t.type===B.BINARY_ACK?(this.reconstructor=new en(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else if(mt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(B[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===B.BINARY_EVENT||s.type===B.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(i,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(i,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const i=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}s.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=Zs(e.substr(t));if(gt.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}static isPayloadValid(e,t){switch(e){case B.CONNECT:return typeof t=="object";case B.DISCONNECT:return t===void 0;case B.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case B.EVENT:case B.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case B.ACK:case B.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function Zs(n){try{return JSON.parse(n)}catch{return!1}}class en{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Xs(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var tn=Object.freeze(Object.defineProperty({__proto__:null,protocol:Qs,get PacketType(){return B},Encoder:Gs,Decoder:gt},Symbol.toStringTag,{value:"Module"}));function ee(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const sn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ts extends xe{constructor(e,t,s){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ee(e,"open",this.onopen.bind(this)),ee(e,"packet",this.onpacket.bind(this)),ee(e,"error",this.onerror.bind(this)),ee(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(sn.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const s={type:B.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const o=this.ids++,c=t.pop();this._registerAckCallback(o,c),s.id=o}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?this.packet(s):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){const s=this.flags.timeout;if(s===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);t.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...i])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:B.CONNECT,data:e})}):this.packet({type:B.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case B.CONNECT:if(e.data&&e.data.sid){const r=e.data.sid;this.onconnect(r)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case B.EVENT:this.onevent(e);break;case B.BINARY_EVENT:this.onevent(e);break;case B.ACK:this.onack(e);break;case B.BINARY_ACK:this.onack(e);break;case B.DISCONNECT:this.ondisconnect();break;case B.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:B.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:B.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var nn=Ce;function Ce(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Ce.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Ce.prototype.reset=function(){this.attempts=0};Ce.prototype.setMin=function(n){this.ms=n};Ce.prototype.setMax=function(n){this.max=n};Ce.prototype.setJitter=function(n){this.jitter=n};class ot extends xe{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ke(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new nn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||tn;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ce(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=ee(t,"open",function(){s.onopen(),e&&e()}),i=ee(t,"error",o=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",o),e?e(o):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&r();const c=this.setTimeoutFn(()=>{r(),t.close(),t.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ee(e,"ping",this.onping.bind(this)),ee(e,"data",this.ondata.bind(this)),ee(e,"error",this.onerror.bind(this)),ee(e,"close",this.onclose.bind(this)),ee(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s||(s=new ts(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oe={};function ze(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=ks(n,e.path||"/socket.io"),s=t.source,r=t.id,i=t.path,o=Oe[r]&&i in Oe[r].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let a;return c?a=new ot(s,e):(Oe[r]||(Oe[r]=new ot(s,e)),a=Oe[r]),t.query&&!e.query&&(e.query=t.queryKey),a.socket(t.path,e)}Object.assign(ze,{Manager:ot,Socket:ts,io:ze,connect:ze});function rn(n,e){return e=e||{},new Promise(function(t,s){var r=new XMLHttpRequest,i=[],o=[],c={},a=function(){return{ok:(r.status/100|0)==2,statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:a,headers:{keys:function(){return i},entries:function(){return o},get:function(h){return c[h.toLowerCase()]},has:function(h){return h.toLowerCase()in c}}}};for(var d in r.open(e.method||"get",n,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,l,v){i.push(l=l.toLowerCase()),o.push([l,v]),c[l]=c[l]?c[l]+","+v:v}),t(a())},r.onerror=s,r.withCredentials=e.credentials=="include",e.headers)r.setRequestHeader(d,e.headers[d]);r.send(e.body||null)})}var on=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"})),Nt=gs(on),ct=self.fetch||(self.fetch=Nt.default||Nt);const Xe=new Map,ss=n=>{if(Xe.has(n))return Xe.get(n);const e=zt({type:n}),t={is(s){const{data:r}=Ne(e);return r===s},value(){return U({},Ne(e))},setTo(s){e.set({type:n,data:s})},clear(){e.set({type:n})},error(s){e.set({type:n,error:s})},subscribe(s){return e.subscribe(r=>{r&&s(r)})}};return Xe.set(n,t),t},Qe=ss("loading"),ns=n=>n.then(e=>(Qe.setTo(!1),e.json().then(t=>{const s=ne(U({},t),{status:e.status});return s.error&&s.error.indexOf("Duplicate")>=0&&(s.error="Duplicate data error"),s}).catch(t=>{Qe.setTo(!1),Promise.resolve({error:t,status:e.status})}))).catch(e=>(Qe.setTo(!1),Promise.resolve({error:e,status:500}))),cn=!0,an=function(n){for(var e="",t=0;t<n.length;t++){var s=n.charCodeAt(t),r=s^"120";e=e+String.fromCharCode(r)}return e},un=function(n){return an(window.atob(n))},ln=n=>{if(n){const e=decodeURIComponent(n),t=un(e);try{return t?JSON.parse(t):null}catch{return null}}return null};/*! js-cookie v3.0.1 | MIT */function qe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)n[s]=t[s]}return n}var hn={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function at(n,e){function t(r,i,o){if(typeof document!="undefined"){o=qe({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var a in o)!o[a]||(c+="; "+a,o[a]!==!0&&(c+="="+o[a].split(";")[0]));return document.cookie=r+"="+n.write(i,r)+c}}function s(r){if(!(typeof document=="undefined"||arguments.length&&!r)){for(var i=document.cookie?document.cookie.split("; "):[],o={},c=0;c<i.length;c++){var a=i[c].split("="),d=a.slice(1).join("=");try{var h=decodeURIComponent(a[0]);if(o[h]=n.read(d,h),r===h)break}catch{}}return r?o[r]:o}}return Object.create({set:t,get:s,remove:function(r,i){t(r,"",qe({},i,{expires:-1}))},withAttributes:function(r){return at(this.converter,qe({},this.attributes,r))},withConverter:function(r){return at(qe({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var Ue=at(hn,{path:"/"});const Ve={set(n,e,t){!n||!e||!cn||(t?Ue.set(n,e,t):Ue.set(n,e))},get(n){return Ue.get(n)},clear(n){Ue.remove(n)},token(){const n=this.get("sessionUser"),e=ln(n||"");return e?e.token:""}};var je={BASE_HOST:()=>"//localhost:3001",BASE_URL:()=>"http://localhost:3001/bee"};const Re=ss("loading");let oe=null;const Ge=function(n,e,t){const s={"Content-type":"application/json; charset=UTF-8","x-access-token":Ve.token()},r=()=>{const o=t||{};return Object.keys(o).map(c=>`${c}=${encodeURIComponent(o[c])}`).join("&")},i=["post","put"].includes(e.toLowerCase());if(!i){const o=r();o&&(n=`${n}?${o}`)}return Re.setTo(!0),ns(i?ct(`${je.BASE_URL()}${n}`,{method:e,headers:s,body:JSON.stringify(t||{})}):ct(`${je.BASE_URL()}${n}`,{method:e,headers:s}))},M={cometListeners:{},destroy(){M.sync=Ge,oe=null},auth(){!oe||(oe.auth.token=Ve.token(),oe.disconnect().connect())},initIO(){oe===null&&(oe=ze(`${je.BASE_HOST()}`,{transports:["websocket"],auth:{"x-access-token":Ve.token()}}),oe.on("connect",function(){M.sync=function(n,e,t){return new Promise((s,r)=>{try{Re.setTo(!0),oe.emit(e,{path:n,data:t},i=>{const{status:o,body:c}=i;let a=U({status:o},c||{});a.error&&a.error.indexOf("Duplicate")>=0&&(a.error="Duplicate data error"),Re.setTo(!1),s(a)})}catch(i){Re.setTo(!1),s({error:i})}})}}),oe.on("comets",M.onComets))},onCometsNotify(n){const e=M.cometListeners[n.store]||[];e.find(t=>t.listenerID===n.listenerID)||(e.push(n),M.cometListeners[n.store]=e)},stopCometsOn(n){const e=M.cometListeners[n.store]||[];if(!e.length)return;const t=e.filter(s=>s.listenerID!==n.listenerID);M.cometListeners[n.store]=t},onComets(n){let e=M.cometListeners[n.room]||[];!e.length||e.forEach(t=>t.onComets(n))},upload(n,e){return Re.setTo(!0),ns(ct(`${je.BASE_URL()}${n}`,{headers,method:"POST",body:e}))},fetch:Ge,sync:Ge},fn=function(n,e){let t;return function(...s){const r=this;clearTimeout(t),t=setTimeout(()=>n.apply(r,s),e)}},Se=function(n){n=n+"";var e=n.indexOf("_");if(e<0)return n==="id"?n.toUpperCase():n.charAt(0).toUpperCase()+n.substring(1);let t=n.split("_"),s="";return t.forEach(function(r){s+=s.length>0?" "+Se(r):Se(r)}),s},St=(n,e={},t="asc",s,r,i,o,c=!1)=>{let a=0,d={},h="",l=!1,v=!1,w=1;const x=n,N={},C=25,k=`/${n}`,L=()=>{w=1,a=0,l=!1,e={},d={},r.set({data:[],recordCount:0,pages:0,page:w,status:"idle"})},P=p=>{r.update(_=>ne(U({},_),{status:p}))},G=p=>fn(()=>{l=!1,a=0,w=1,h=p,y()},500)(),Z=p=>{l=!1,a=0,w=1,d=p,y()},J=p=>{+p+1!==w&&(a=+p*C,w=+p+1,l=!1,y())},b=()=>{if(!l)return;const{recordCount:p,status:_}=Ne(r);a+C>p||_==="done"&&(a+=C,l=!1,v=!0,y())},R=()=>{let p=ne(U(ne(U({},e),{limit:C,offset:a}),d),{direction:t});return s&&(p.orderby=s),"limit"in e&&!e.limit&&delete p.limit,h&&(p=ne(U({},p),{search:h})),d={},p},z=p=>{const{recordCount:_,data:m}=p;r.update(({data:A})=>{c&&m.reverse();const V=v?c?[...m,...A]:[...A,...m]:m,j=_?Math.ceil(_/C):0;return{data:V,recordCount:_,page:w,pages:j,status:"done"}}),l=!0},X=async p=>{if(!l)return;await ge(p.id)&&r.update(({data:m,recordCount:A,status:V})=>{const j=A-1,le=m.filter(us=>us.id!=p.id),Je=j?Math.ceil(j/C):0;return{page:w,data:le,recordCount:j,pages:Je,status:V}})},ae=async p=>{!l||await ge(p.id)||(p=ne(U({},p),{isNew:!0}),r.update(({data:m,recordCount:A,status:V})=>{const j=c?[...m,p]:t==="asc"?[...m,p]:[p,...m],le=A+1,Je=le?Math.ceil(le/C):0;return{data:j,recordCount:le,page:w,pages:Je,status:V}}))},de=p=>{!l||r.update(A=>{var V=A,{data:_}=V,m=wt(V,["data"]);const j=_.map(le=>le.id==p.id?p:le);return ne(U({},m),{data:j})})},Ae=()=>Ne(r),y=async p=>{if(p){P("fetching");const j=Array.isArray(p)?[...p]:[U({},p)];return z({data:j,recordCount:j.length})}if(l)return;const _=R();P("fetching");let{data:m,recordCount:A,error:V}=await M.sync(k,"get",U({},_));V&&P("fetching"),m&&(m=Array.isArray(m)?m:[m],A=A||m.length,z({data:m,recordCount:A}))},S=async p=>{const _=await M.fetch(`${k}/signup`,"post",p);if(_.error)return{error:_.error,status:_.status};if(_.status===201)return{data:_.data,status:_.status}},D=async p=>{const _=await M.fetch(`${k}/signin`,"post",p);if(_.error)return{error:_.error,status:_.status};if(_.status===200)return{data:_.data,status:_.status}},f=async()=>await M.fetch(`${k}/signout`,"get"),$=async()=>await M.fetch(`${k}/sessionuser`,"get"),F=async p=>{const _=await fetch("/login",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}}),{error:m,data:A}=await _.json();return m?{error:m}:(M.auth(),{data:A})},H=async()=>{const p=await fetch("/logout",{method:"POST",headers:{"Content-Type":"application/json"}}),{data:_}=await p.json();return _&&(Ve.clear("sessionUser"),M.auth()),{data:_}},ue=async(p,_)=>await M.fetch(`${k}${p}`,"post",_),We=async(p,_)=>await M.fetch(`${k}${p}`,"get",_),rs=async p=>{const _=`${k}/${p.id}`,m=await M.sync(_,"delete",p);if(!m.error&&m.data){X(m.data);const A=`${Se(x)} was successfully destroyed.`;return{data:m.data,status:m.status,message:A}}return{error:m.error,status:m.status}},is=async p=>{const _=p.id?"put":"post",m=p.id?`${k}/${p.id}`:k,A=await M.sync(m,_,p);let V;return A.error||(_==="put"?(de(A.data),V=`${Se(x)} was successfully updated.`):(ae(A.data),V=`${Se(x)} was successfully created.`)),{error:A.error,data:A.data,status:A.status,message:V}},ge=async(p,_="id")=>(l||await y(),(Ne(r).data||[]).find(m=>m[_]==p)),os=p=>M.fetch(`${k}/despace`,"POST",p),cs=p=>M.upload(`${k}/upload`,p),as=(p,_)=>{const m=N[p]||[],A=m.length;return m[A]=_,N[p]=m,()=>N[p].splice(A,1)},Pe=(p,_)=>{(N[p]||[]).forEach(m=>m(_))};return(()=>{const p=m=>{const A=(V,j)=>V&&e[j]==m[j];return Object.entries(e).length>0?Object.keys(e).reduce(A,!0):!0},_={store:o,listenerID:i,async onComets(m){if(m.room!==o)return console.log(`${m.room} is not ${o}`);let A;switch(m.verb){case"refresh":z(m.data),Pe(m.verb,m.data);break;case"update":A=await ge(m.data.id),A&&(de(m.data),Pe(m.verb,m.data));break;case"create":p(m.data)&&(A=await ge(m.data.id),A||(ae(m.data),Pe(m.verb,m.data)));break;case"destroy":A=await ge(m.data.id),A&&(X(m.data),Pe(m.verb,m.data));break}}};M.onCometsNotify(_)})(),{subscribe:r.subscribe,sync:y,inSync:()=>l,next:b,on:as,value:Ae,search:G,paginate:J,post:ue,get:We,destroy:rs,save:is,find:ge,remove:X,patch:de,add:ae,reset:L,upload:cs,dropFile:os,login:F,logout:H,signIn:D,signUp:S,signOut:f,sessionUser:$,filter:Z,debug:()=>console.log(e,t)}};M.initIO();class Le{constructor(){return Le.instance||(this.stores={},Le.instance=this),Le.instance}useStore(e="",t={},s="asc",r=e){let i="",o=e.indexOf("~")===0,c;if(s){const[v="asc",w=""]=s.split("|");c=v,i=w}c=(c||"asc").toLowerCase();const a=U({order:c,orderby:i},t);i&&(a.orderby=i);const d=`/${e}/${JSON.stringify(a)}`,h=this.stores[d];if(e=e.replace("~",""),r=r.replace("~",""),h)return St(e,t,c,i,h,d,r,o);const l=zt({data:[],recordCount:0,pages:0,page:1,status:"idle"});return this.stores[d]=l,St(e,t,c,i,l,d,r,o)}}const ut=new Le;Object.freeze(ut);const dn=ut.useStore.bind(ut);function pn(n){let e,t,s,r,i,o,c,a,d,h,l,v,w,x,N;return{c(){e=T("defs"),t=T("marker"),s=T("path"),r=T("symbol"),i=T("path"),o=T("symbol"),c=T("path"),a=T("symbol"),d=T("path"),h=T("symbol"),l=T("path"),v=T("symbol"),w=T("path"),x=T("symbol"),N=T("path"),this.h()},l(C){e=O(C,"defs",{});var k=E(e);t=O(k,"marker",{id:!0,markerWidth:!0,markerHeight:!0,refX:!0,refY:!0,orient:!0,markerUnits:!0,viewBox:!0});var L=E(t);s=O(L,"path",{d:!0,fill:!0}),E(s).forEach(g),L.forEach(g),r=O(k,"symbol",{id:!0,viewBox:!0});var P=E(r);i=O(P,"path",{transform:!0,d:!0}),E(i).forEach(g),P.forEach(g),o=O(k,"symbol",{id:!0,viewBox:!0});var G=E(o);c=O(G,"path",{transform:!0,d:!0}),E(c).forEach(g),G.forEach(g),a=O(k,"symbol",{id:!0,viewBox:!0});var Z=E(a);d=O(Z,"path",{transform:!0,d:!0}),E(d).forEach(g),Z.forEach(g),h=O(k,"symbol",{id:!0,viewBox:!0});var J=E(h);l=O(J,"path",{transform:!0,d:!0}),E(l).forEach(g),J.forEach(g),v=O(k,"symbol",{id:!0,viewBox:!0});var b=E(v);w=O(b,"path",{transform:!0,d:!0}),E(w).forEach(g),b.forEach(g),x=O(k,"symbol",{id:!0,viewBox:!0});var R=E(x);N=O(R,"path",{transform:!0,d:!0}),E(N).forEach(g),R.forEach(g),k.forEach(g),this.h()},h(){u(s,"d","M0,0 L0,6 L9,3 z"),u(s,"fill","#ccc"),u(t,"id","arrow"),u(t,"markerWidth","15"),u(t,"markerHeight","15"),u(t,"refX","0"),u(t,"refY","3"),u(t,"orient","auto"),u(t,"markerUnits","strokeWidth"),u(t,"viewBox","0 0 20 20"),u(i,"transform","scale(1, -1) translate(0, -1000)"),u(i,"d","M511.232 849.92v-195.994l359.27 0.051v-386.662h-359.27v-195.635l-388.25 389.12z"),u(r,"id","svggoback"),u(r,"viewBox","0 0 1024 1024"),u(c,"transform","scale(1, -1) translate(0, -1000)"),u(c,"d","M256 864c0-53.019-42.981-96-96-96s-96 42.981-96 96c0 53.019 42.981 96 96 96s96-42.981 96-96zM832 864c0-53.019-42.981-96-96-96s-96 42.981-96 96c0 53.019 42.981 96 96 96s96-42.981 96-96zM256 704h-192c-35.346 0-64-28.654-64-64v-320h64v-384h80v384h32v-384h80v384h64v320c0 35.346-28.652 64-64 64zM975 448l49 35.5-133.286 206.116c-5.92 8.98-15.958 14.384-26.714 14.384h-256c-10.756 0-20.792-5.404-26.714-14.384l-133.286-206.116 49-35.5 110.644 143.596 38.458-89.74-134.102-245.856h122.666l21.334-320h64v320h32v-320h64l21.334 320h122.666l-134.104 245.858 38.458 89.74 110.646-143.598z"),u(o,"id","svghuman"),u(o,"viewBox","0 0 1024 1024"),u(d,"transform","scale(1, -1) translate(0, -1000)"),u(d,"d","M680.576 254.752l22.688 22.688c25.056 25.056 25.056 65.696 0 90.752l-39.168 39.136c12.608 21.952 22.496 45.568 29.376 70.496h42.368c35.424 0 64.16 28.736 64.16 64.16v32.064c0 35.424-28.704 64.16-64.16 64.16h-41.856c-6.656 24.672-16.096 48.16-28.384 69.952l37.664 37.632c25.056 25.056 25.056 65.696 0 90.752l-22.688 22.656c-25.056 25.056-65.696 25.056-90.752 0l-36.896-36.896c-22.56 13.152-46.944 23.392-72.704 30.432v43.104c-0.032 35.456-28.768 64.16-64.192 64.16h-32.064c-35.424 0-64.192-28.704-64.192-64.16v-43.104c-25.76-7.040-50.112-17.28-72.704-30.432l-36.928 36.928c-25.024 25.056-65.664 25.056-90.72 0l-22.688-22.656c-25.056-25.056-25.056-65.696 0-90.752l37.632-37.664c-12.256-21.792-21.76-45.28-28.384-69.984h-41.824c-35.456 0.032-64.16-28.704-64.16-64.16v-32.064c0-35.424 28.704-64.16 64.16-64.16h42.336c6.912-24.928 16.768-48.544 29.408-70.496l-39.168-39.136c-25.056-25.056-25.056-65.696 0-90.752l22.688-22.688c25.056-25.056 65.696-25.056 90.72 0l39.392 39.392c21.888-12.448 45.408-22.144 70.208-28.896v-41.088c0-35.392 28.736-64.16 64.192-64.16h32.064c35.424 0 64.16 28.736 64.16 64.16v41.088c24.8 6.752 48.384 16.48 70.208 28.896l39.392-39.392c25.12-25.024 65.728-25.024 90.816 0.032zM400 380.576c-97.44 0-176.448 78.976-176.448 176.448 0 97.44 79.008 176.448 176.448 176.448s176.448-79.008 176.448-176.448c0-97.472-79.008-176.448-176.448-176.448zM400 639.2c-44.32 0-80.224-35.904-80.224-80.192s35.904-80.192 80.224-80.192c44.288 0 80.192 35.904 80.192 80.192s-35.904 80.192-80.192 80.192zM801.984 36.416c-21.504 0-38.912-17.408-38.912-38.912 0-21.472 17.408-38.88 38.912-38.88 21.472 0 38.912 17.408 38.912 38.88 0 21.504-17.44 38.912-38.912 38.912zM964.864 35.936h-20.288c-3.232 11.968-7.84 23.36-13.792 33.952l18.24 18.24c12.16 12.16 12.16 31.872 0 44l-11.008 11.008c-12.16 12.16-31.84 12.16-44 0l-17.92-17.888c-10.944 6.368-22.784 11.328-35.264 14.752v20.864c0 17.184-13.952 31.136-31.136 31.136h-15.552c-17.184 0-31.136-13.952-31.136-31.136v-20.864c-12.512-3.424-24.32-8.384-35.264-14.752l-17.92 17.888c-12.16 12.16-31.872 12.16-44 0l-11.008-11.008c-12.16-12.128-12.16-31.84 0-44l18.24-18.24c-5.984-10.56-10.56-21.984-13.792-33.952h-20.288c-17.184 0-31.136-13.952-31.136-31.136v-15.552c0-17.184 13.952-31.136 31.136-31.136h20.544c3.328-12.064 8.128-23.52 14.24-34.176l-18.976-18.976c-12.16-12.16-12.16-31.84 0-44.032l11.008-11.008c12.128-12.128 31.84-12.128 44 0l19.104 19.136c10.624-6.016 22.016-10.752 34.048-14.016v-19.936c0-17.184 13.952-31.136 31.136-31.136h15.552c17.184 0 31.136 13.952 31.136 31.136v19.936c12.032 3.264 23.424 7.968 34.016 14.016l19.136-19.136c12.16-12.128 31.84-12.128 44 0l11.008 11.008c12.16 12.192 12.16 31.872 0 44.032l-18.976 18.976c6.080 10.656 10.912 22.112 14.24 34.176h20.544c17.184 0 31.136 13.952 31.136 31.136v15.552c0.128 17.216-13.824 31.136-31.008 31.136zM801.984-89.024c-47.264 0-85.568 38.304-85.568 85.6 0 47.264 38.304 85.568 85.568 85.568s85.568-38.304 85.568-85.568c0-47.296-38.304-85.6-85.568-85.6z"),u(a,"id","svgrules"),u(a,"viewBox","0 0 1024 1024"),u(l,"transform","scale(1, -1) translate(0, -1000)"),u(l,"d","M512 952.32c-271.462 0-491.52-220.058-491.52-491.52s220.058-491.52 491.52-491.52 491.52 220.058 491.52 491.52-220.058 491.52-491.52 491.52zM628.378 612.659h-73.882c-8.704 0-18.432-11.52-18.432-26.829v-53.35h92.365v-76.083h-92.365v-228.403h-87.245v228.403h-79.053v76.032h79.053v44.749c0 64.205 44.544 116.378 105.677 116.378h73.882v-80.896z"),u(h,"id","svgfunction"),u(h,"viewBox","0 0 1024 1024"),u(w,"transform","scale(1, -1) translate(0, -1000)"),u(w,"d","M854.938 487.066l-438.323 271.565c-31.949 20.941-58.061 5.478-58.061-34.304v-527.155c0-39.782 26.163-55.194 58.061-34.253l438.374 271.565c0 0 15.565 10.957 15.565 26.317-0.051 15.309-15.616 26.266-15.616 26.266z"),u(v,"id","svgstart"),u(v,"viewBox","0 0 1024 1024"),u(N,"transform","scale(1, -1) translate(0, -1000)"),u(N,"d","M512 819.2c-197.939 0-358.4-160.461-358.4-358.4s160.461-358.4 358.4-358.4c197.888 0 358.4 160.461 358.4 358.4s-160.512 358.4-358.4 358.4z"),u(x,"id","svgend"),u(x,"viewBox","0 0 1024 1024")},m(C,k){q(C,e,k),I(e,t),I(t,s),I(e,r),I(r,i),I(e,o),I(o,c),I(e,a),I(a,d),I(e,h),I(h,l),I(e,v),I(v,w),I(e,x),I(x,N)},p:te,i:te,o:te,d(C){C&&g(e)}}}class yn extends pe{constructor(e){super(),ye(this,e,null,pn,me,{})}}function mn(n){let e,t,s,r,i;return{c(){e=T("svg"),t=T("use"),this.h()},l(o){e=O(o,"svg",{class:!0,y:!0,x:!0,height:!0,width:!0});var c=E(e);t=O(c,"use",{"xlink:href":!0}),E(t).forEach(g),c.forEach(g),this.h()},h(){ve(t,"xlink:href",s=`#svg${n[0]}`),u(e,"class",r=_e(`svgIcon  ${n[0]}`)+" svelte-lxy7ov"),u(e,"y","0"),u(e,"x",i=n[1]/2),u(e,"height","20"),u(e,"width","16")},m(o,c){q(o,e,c),I(e,t)},p(o,c){c&1&&s!==(s=`#svg${o[0]}`)&&ve(t,"xlink:href",s),c&1&&r!==(r=_e(`svgIcon  ${o[0]}`)+" svelte-lxy7ov")&&u(e,"class",r),c&2&&i!==(i=o[1]/2)&&u(e,"x",i)},d(o){o&&g(e)}}}function gn(n){let e,t,s,r,i,o,c;return{c(){e=T("svg"),t=T("use"),r=lt(),i=T("svg"),o=T("use"),this.h()},l(a){e=O(a,"svg",{class:!0,y:!0,x:!0,height:!0,width:!0});var d=E(e);t=O(d,"use",{"xlink:href":!0}),E(t).forEach(g),d.forEach(g),r=ht(a),i=O(a,"svg",{class:!0,y:!0,x:!0,height:!0,width:!0});var h=E(i);o=O(h,"use",{"xlink:href":!0}),E(o).forEach(g),h.forEach(g),this.h()},h(){ve(t,"xlink:href","#svggoback"),u(e,"class","svgIcon goback svelte-lxy7ov"),u(e,"y","0"),u(e,"x",s=n[1]/2+16),u(e,"height","20"),u(e,"width","20"),ve(o,"xlink:href","#svghuman"),u(i,"class","svgIcon human svelte-lxy7ov"),u(i,"y","0"),u(i,"x",c=n[1]/2),u(i,"height","20"),u(i,"width","16")},m(a,d){q(a,e,d),I(e,t),q(a,r,d),q(a,i,d),I(i,o)},p(a,d){d&2&&s!==(s=a[1]/2+16)&&u(e,"x",s),d&2&&c!==(c=a[1]/2)&&u(i,"x",c)},d(a){a&&g(e),a&&g(r),a&&g(i)}}}function vn(n){let e,t,s,r,i;return{c(){e=T("svg"),t=T("use"),this.h()},l(o){e=O(o,"svg",{class:!0,y:!0,x:!0,height:!0,width:!0});var c=E(e);t=O(c,"use",{"xlink:href":!0}),E(t).forEach(g),c.forEach(g),this.h()},h(){ve(t,"xlink:href",s=`#svg${n[0]}`),u(e,"class",r=_e(`svgIcon  ${n[0]}`)+" svelte-lxy7ov"),u(e,"y","15"),u(e,"x",i=n[1]/2),u(e,"height","20"),u(e,"width","20")},m(o,c){q(o,e,c),I(e,t)},p(o,c){c&1&&s!==(s=`#svg${o[0]}`)&&ve(t,"xlink:href",s),c&1&&r!==(r=_e(`svgIcon  ${o[0]}`)+" svelte-lxy7ov")&&u(e,"class",r),c&2&&i!==(i=o[1]/2)&&u(e,"x",i)},d(o){o&&g(e)}}}function _n(n){let e,t;function s(o,c){return c&1&&(e=null),e==null&&(e=!!["start","end"].includes(o[0])),e?vn:o[0]==="goback"?gn:mn}let r=s(n,-1),i=r(n);return{c(){i.c(),t=K()},l(o){i.l(o),t=K()},m(o,c){i.m(o,c),q(o,t,c)},p(o,[c]){r===(r=s(o,c))&&i?i.p(o,c):(i.d(1),i=r(o),i&&(i.c(),i.m(t.parentNode,t)))},i:te,o:te,d(o){i.d(o),o&&g(t)}}}function bn(n,e,t){let{type:s,width:r}=e;return n.$$set=i=>{"type"in i&&t(0,s=i.type),"width"in i&&t(1,r=i.width)},[s,r]}class wn extends pe{constructor(e){super(),ye(this,e,bn,_n,me,{type:0,width:1})}}function Lt(n){let e;function t(i,o){return i[3]==="goback"?En:kn}let s=t(n),r=s(n);return{c(){r.c(),e=K()},l(i){r.l(i),e=K()},m(i,o){r.m(i,o),q(i,e,o)},p(i,o){s===(s=t(i))&&r?r.p(i,o):(r.d(1),r=s(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){r.d(i),i&&g(e)}}}function kn(n){let e,t,s=n[3]!=="start"&&It(n),r=n[3]!=="end"&&Pt(n);return{c(){s&&s.c(),e=lt(),r&&r.c(),t=K()},l(i){s&&s.l(i),e=ht(i),r&&r.l(i),t=K()},m(i,o){s&&s.m(i,o),q(i,e,o),r&&r.m(i,o),q(i,t,o)},p(i,o){i[3]!=="start"?s?s.p(i,o):(s=It(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[3]!=="end"?r?r.p(i,o):(r=Pt(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(i){s&&s.d(i),i&&g(e),r&&r.d(i),i&&g(t)}}}function En(n){let e,t,s,r;return{c(){e=T("circle"),s=lt(),r=T("circle"),this.h()},l(i){e=O(i,"circle",{stroke:!0,"stroke-width":!0,fill:!0,cx:!0,cy:!0,r:!0,class:!0}),E(e).forEach(g),s=ht(i),r=O(i,"circle",{stroke:!0,"stroke-width":!0,fill:!0,cx:!0,cy:!0,r:!0,class:!0}),E(r).forEach(g),this.h()},h(){u(e,"stroke","orange"),u(e,"stroke-width",3),u(e,"fill","#333"),u(e,"cx",t=n[2]+10),u(e,"cy","27"),u(e,"r",5),u(e,"class","process-input"),u(r,"stroke","lime"),u(r,"stroke-width",3),u(r,"fill","#333"),u(r,"cx","10"),u(r,"cy","27"),u(r,"r",5),u(r,"class","process-output")},m(i,o){q(i,e,o),n[4](e),q(i,s,o),q(i,r,o),n[5](r)},p(i,o){o&4&&t!==(t=i[2]+10)&&u(e,"cx",t)},d(i){i&&g(e),n[4](null),i&&g(s),i&&g(r),n[5](null)}}}function It(n){let e,t,s;return{c(){e=T("circle"),this.h()},l(r){e=O(r,"circle",{stroke:!0,"stroke-width":!0,fill:!0,cx:!0,cy:!0,r:!0,class:!0}),E(e).forEach(g),this.h()},h(){u(e,"stroke","orange"),u(e,"stroke-width",t=3),u(e,"fill","#333"),u(e,"cx","10"),u(e,"cy","27"),u(e,"r",s=5),u(e,"class","process-input")},m(r,i){q(r,e,i),n[6](e)},p:te,d(r){r&&g(e),n[6](null)}}}function Pt(n){let e,t,s,r;return{c(){e=T("circle"),this.h()},l(i){e=O(i,"circle",{stroke:!0,"stroke-width":!0,fill:!0,cx:!0,cy:!0,r:!0,class:!0}),E(e).forEach(g),this.h()},h(){u(e,"stroke","lime"),u(e,"stroke-width",t=3),u(e,"fill","#333"),u(e,"cx",s=n[2]+10),u(e,"cy","27"),u(e,"r",r=5),u(e,"class","process-output")},m(i,o){q(i,e,o),n[7](e)},p(i,o){o&4&&s!==(s=i[2]+10)&&u(e,"cx",s)},d(i){i&&g(e),n[7](null)}}}function xn(n){let e,t=n[3]&&n[2]&&Lt(n);return{c(){t&&t.c(),e=K()},l(s){t&&t.l(s),e=K()},m(s,r){t&&t.m(s,r),q(s,e,r)},p(s,[r]){s[3]&&s[2]?t?t.p(s,r):(t=Lt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:te,o:te,d(s){t&&t.d(s),s&&g(e)}}}function Cn(n,e,t){let{width:s,type:r,nodeInput:i,nodeOutput:o}=e;function c(l){W[l?"unshift":"push"](()=>{i=l,t(0,i)})}function a(l){W[l?"unshift":"push"](()=>{o=l,t(1,o)})}function d(l){W[l?"unshift":"push"](()=>{i=l,t(0,i)})}function h(l){W[l?"unshift":"push"](()=>{o=l,t(1,o)})}return n.$$set=l=>{"width"in l&&t(2,s=l.width),"type"in l&&t(3,r=l.type),"nodeInput"in l&&t(0,i=l.nodeInput),"nodeOutput"in l&&t(1,o=l.nodeOutput)},[i,o,s,r,c,a,d,h]}class An extends pe{constructor(e){super(),ye(this,e,Cn,xn,me,{width:2,type:3,nodeInput:0,nodeOutput:1})}}function Tn(n){let e,t,s,r,i,o,c,a=n[0].text+"",d,h,l,v,w,x,N,C,k,L,P;function G(b){n[13](b)}function Z(b){n[14](b)}let J={type:n[0].type,width:n[0].width};return n[4]!==void 0&&(J.nodeInput=n[4]),n[5]!==void 0&&(J.nodeOutput=n[5]),w=new An({props:J}),W.push(()=>kt(w,"nodeInput",G)),W.push(()=>kt(w,"nodeOutput",Z)),C=new wn({props:{type:n[0].type,width:n[0].width}}),{c(){e=T("g"),t=T("rect"),c=T("text"),d=Ut(a),be(w.$$.fragment),be(C.$$.fragment),this.h()},l(b){e=O(b,"g",{id:!0,class:!0,transform:!0});var R=E(e);t=O(R,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,class:!0}),E(t).forEach(g),c=O(R,"text",{x:!0,y:!0,class:!0,fill:!0});var z=E(c);d=Dt(z,a),z.forEach(g),we(w.$$.fragment,R),we(C.$$.fragment,R),R.forEach(g),this.h()},h(){u(t,"x","10"),u(t,"y","0"),u(t,"width",s=n[0].width),u(t,"height",r=n[0].height),u(t,"rx",i=n[0].radius),u(t,"class",o=_e(`svgPane ${n[0].type}`)+" svelte-21w30u"),u(c,"x",h=n[0].tx),u(c,"y",l=n[0].ty+5),u(c,"class","svgPaneText svelte-21w30u"),u(c,"fill",v=["start","end"].includes(n[0].type)?"transparent":"#eee"),u(e,"id",k=n[0].id),u(e,"class","svgPaneCanvas svelte-21w30u"),u(e,"transform",L=`translate(${n[0].x},${n[0].y})`)},m(b,R){q(b,e,R),I(e,t),n[11](t),I(e,c),I(c,d),n[12](c),ke(w,e,null),ke(C,e,null),n[15](e),P=!0},p(b,[R]){(!P||R&1&&s!==(s=b[0].width))&&u(t,"width",s),(!P||R&1&&r!==(r=b[0].height))&&u(t,"height",r),(!P||R&1&&i!==(i=b[0].radius))&&u(t,"rx",i),(!P||R&1&&o!==(o=_e(`svgPane ${b[0].type}`)+" svelte-21w30u"))&&u(t,"class",o),(!P||R&1)&&a!==(a=b[0].text+"")&&Ft(d,a),(!P||R&1&&h!==(h=b[0].tx))&&u(c,"x",h),(!P||R&1&&l!==(l=b[0].ty+5))&&u(c,"y",l),(!P||R&1&&v!==(v=["start","end"].includes(b[0].type)?"transparent":"#eee"))&&u(c,"fill",v);const z={};R&1&&(z.type=b[0].type),R&1&&(z.width=b[0].width),!x&&R&16&&(x=!0,z.nodeInput=b[4],Et(()=>x=!1)),!N&&R&32&&(N=!0,z.nodeOutput=b[5],Et(()=>N=!1)),w.$set(z);const X={};R&1&&(X.type=b[0].type),R&1&&(X.width=b[0].width),C.$set(X),(!P||R&1&&k!==(k=b[0].id))&&u(e,"id",k),(!P||R&1&&L!==(L=`translate(${b[0].x},${b[0].y})`))&&u(e,"transform",L)},i(b){P||(Q(w.$$.fragment,b),Q(C.$$.fragment,b),P=!0)},o(b){se(w.$$.fragment,b),se(C.$$.fragment,b),P=!1},d(b){b&&g(e),n[11](null),n[12](null),Ee(w),Ee(C),n[15](null)}}}function On(n,e,t){let{data:s,save:r,canvasEl:i}=e,o,c,a,d,h,l,v,w,x;const N=ds(),C=(f,$)=>{N(f,$||s)},k=async()=>{s.nexts.forEach(f=>{s.type!=="goback"?(f.x1=s.x+s.width+18,f.y1=s.y+27):(f.x1=s.x+10,f.y1=s.y+27)}),s.prevs.forEach(f=>{s.type!=="goback"?(f.x2=s.x-7,f.y2=s.y+27):(f.x2=s.x+s.width+27,f.y2=s.y+27)})},L=async f=>{f&&(s.type!=="goback"?(f.y2=s.y+27,f.x2=s.x-7):(f.y2=s.y+27,f.x2=s.x+s.width+27),s.prevs.push(f),await r(s))},P=async f=>{f&&(s.nexts.forEach(($,F)=>{f.id==$.id&&s.nexts.splice(F,1)}),await r(s))},G=async f=>{f&&(s.type!=="goback"?(f.x1=s.x+s.width+10,f.y1=s.y+27):(f.x1=s.x+10,f.y1=s.y+27),s.nexts.push(f),await r(s),k())},Z=f=>{let $=U({},f);const{name:F}=f;if(F&&s.text!==F){t(1,a.textContent=F,a);let H=a.getBBox();Object.assign($,{text:F,width:H.width+40})}t(0,s=U(U({},s),$)),k()},J=()=>{o.addEventListener("mousedown",R,!1),document.addEventListener("mousedown",f=>{o&&o.contains(f.target)&&C("focus")},!1)},b=f=>{var $=i.getScreenCTM();return{x:(f.clientX-$.e)/$.a,y:(f.clientY-$.f)/$.d}},R=async f=>{f.target==h&&(s.type!=="start"||s.type==="start"&&!s.nexts.length)?(w="onConnecting",l=b(f),l.y=s.y+27,x={x1:l.x,y1:l.y,x2:l.x,y2:l.y,start:s.id,type:"connector",direction:s.type==="goback"?"back":"front"},N("connect",x),G(x)):(w="move",l=b(f),v={x:s.x,y:s.y}),f.preventDefault&&!f.target.getAttribute("contenteditable")?f.preventDefault():f.target.getAttribute("contenteditable")||(f.returnValue=!1),z()},z=f=>{document.addEventListener("mousemove",X),document.addEventListener("mouseup",ae)},X=async f=>{f.preventDefault();let $=null;switch(w){case"move":$=b(f);let F=$.x-l.x,H=$.y-l.y,ue=v.x+F,We=v.y+H;t(0,s=ne(U({},s),{x:ue,y:We})),N("move",s),k();break;case"onConnecting":$=b(f),x.x2=$.x,x.y2=$.y,N("connecting",x);break}},ae=f=>{switch(document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",ae),w){case"onConnecting":x.task=s.id,x.targetAt=b(f),N("connected",U({},x)),x=null;return}w=null};Ye(()=>{J(),Z({name:s.name})});function de(f){W[f?"unshift":"push"](()=>{c=f,t(3,c)})}function Ae(f){W[f?"unshift":"push"](()=>{a=f,t(1,a)})}function y(f){d=f,t(4,d)}function S(f){h=f,t(5,h)}function D(f){W[f?"unshift":"push"](()=>{o=f,t(2,o)})}return n.$$set=f=>{"data"in f&&t(0,s=f.data),"save"in f&&t(6,r=f.save),"canvasEl"in f&&t(7,i=f.canvasEl)},n.$$.update=()=>{n.$$.dirty&3&&s.name&&a&&Z({name:s.name})},[s,a,o,c,d,h,r,i,L,P,G,de,Ae,y,S,D]}class Bn extends pe{constructor(e){super(),ye(this,e,On,Tn,me,{data:0,save:6,canvasEl:7,setPrev:8,removeNext:9,setNext:10})}get setPrev(){return this.$$.ctx[8]}get removeNext(){return this.$$.ctx[9]}get setNext(){return this.$$.ctx[10]}}function Rn(n){let e,t,s,r,i,o=(n[0].name||"")+"",c,a;return{c(){e=T("g"),t=T("path"),r=T("text"),i=T("textPath"),c=Ut(o),this.h()},l(d){e=O(d,"g",{});var h=E(e);t=O(h,"path",{id:!0,fill:!0,"stroke-linecap":!0,stroke:!0,"stroke-width":!0,d:!0,"marker-end":!0}),E(t).forEach(g),r=O(h,"text",{fill:!0,dy:!0});var l=E(r);i=O(l,"textPath",{href:!0,startOffset:!0});var v=E(i);c=Dt(v,o),v.forEach(g),l.forEach(g),h.forEach(g),this.h()},h(){u(t,"id",s=n[0].id),u(t,"fill","none"),u(t,"stroke-linecap","round"),u(t,"stroke","#cccccc"),u(t,"stroke-width",2),u(t,"d",n[1]),u(t,"marker-end","url(#arrow)"),u(i,"href",a=`#${n[0].id}`),u(i,"startOffset","30"),u(r,"fill","#ccc"),u(r,"dy","-5")},m(d,h){q(d,e,h),I(e,t),n[5](t),I(e,r),I(r,i),I(i,c),n[6](e)},p(d,[h]){h&1&&s!==(s=d[0].id)&&u(t,"id",s),h&2&&u(t,"d",d[1]),h&1&&o!==(o=(d[0].name||"")+"")&&Ft(c,o),h&1&&a!==(a=`#${d[0].id}`)&&u(i,"href",a)},i:te,o:te,d(d){d&&g(e),n[5](null),n[6](null)}}}function Nn(n,e,t){let{data:s}=e,r="",i,o;const c=l=>{t(0,s=U(U({},s),l))},a=()=>{const{x1:l,y1:v,x2:w,y2:x}=s;let N,C,k,L;N=l+35,C=v,w>l?(k=w-35,L=x):(N=l+70,k=w-70,v<x?(C=v+10,L=x-10):(C=v-10,L=x+10)),t(1,r=`M${l},${v} C${N},${C} ${k},${L} ${w},${x}`)};Ye(()=>{document.addEventListener("mousedown",l=>{o&&o==l.target},!1),i.addEventListener("click",l=>{},!1)});function d(l){W[l?"unshift":"push"](()=>{o=l,t(3,o)})}function h(l){W[l?"unshift":"push"](()=>{i=l,t(2,i)})}return n.$$set=l=>{"data"in l&&t(0,s=l.data)},n.$$.update=()=>{n.$$.dirty&1&&s&&a()},[s,r,i,o,c,d,h]}class Sn extends pe{constructor(e){super(),ye(this,e,Nn,Rn,me,{data:0,update:4})}get update(){return this.$$.ctx[4]}}function $t(n,e,t){const s=n.slice();return s[38]=e[t],s[39]=e,s[40]=t,s}function Mt(n){let e=[],t=new Map,s,r,i=n[4].data;const o=c=>c[38].id;for(let c=0;c<i.length;c+=1){let a=$t(n,i,c),d=o(a);t.set(d,e[c]=qt(d,a))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();s=K()},l(c){for(let a=0;a<e.length;a+=1)e[a].l(c);s=K()},m(c,a){for(let d=0;d<e.length;d+=1)e[d].m(c,a);q(c,s,a),r=!0},p(c,a){a[0]&2046&&(i=c[4].data,ft(),e=ps(e,a,o,1,c,i,t,s.parentNode,ys,qt,s,$t),dt())},i(c){if(!r){for(let a=0;a<i.length;a+=1)Q(e[a]);r=!0}},o(c){for(let a=0;a<e.length;a+=1)se(e[a]);r=!1},d(c){for(let a=0;a<e.length;a+=1)e[a].d(c);c&&g(s)}}}function Ln(n){let e,t=n[38],s;const r=()=>n[13](e,t),i=()=>n[13](null,t);let o={data:n[38]};return e=new Sn({props:o}),r(),{c(){be(e.$$.fragment)},l(c){we(e.$$.fragment,c)},m(c,a){ke(e,c,a),s=!0},p(c,a){t!==c[38]&&(i(),t=c[38],r());const d={};a[0]&16&&(d.data=c[38]),e.$set(d)},i(c){s||(Q(e.$$.fragment,c),s=!0)},o(c){se(e.$$.fragment,c),s=!1},d(c){i(),Ee(e,c)}}}function In(n){let e,t=n[38],s;const r=()=>n[12](e,t),i=()=>n[12](null,t);let o={data:n[38],canvasEl:n[1],save:n[5]};return e=new Bn({props:o}),r(),e.$on("focus",n[6]),e.$on("connect",n[8]),e.$on("connecting",n[9]),e.$on("connected",n[10]),e.$on("move",n[7]),{c(){be(e.$$.fragment)},l(c){we(e.$$.fragment,c)},m(c,a){ke(e,c,a),s=!0},p(c,a){t!==c[38]&&(i(),t=c[38],r());const d={};a[0]&16&&(d.data=c[38]),a[0]&2&&(d.canvasEl=c[1]),e.$set(d)},i(c){s||(Q(e.$$.fragment,c),s=!0)},o(c){se(e.$$.fragment,c),s=!1},d(c){i(),Ee(e,c)}}}function qt(n,e){let t,s,r,i,o;const c=[In,Ln],a=[];function d(h,l){return h[38].type!=="connector"?0:1}return s=d(e),r=a[s]=c[s](e),{key:n,first:null,c(){t=K(),r.c(),i=K(),this.h()},l(h){t=K(),r.l(h),i=K(),this.h()},h(){this.first=t},m(h,l){q(h,t,l),a[s].m(h,l),q(h,i,l),o=!0},p(h,l){e=h;let v=s;s=d(e),s===v?a[s].p(e,l):(ft(),se(a[v],1,1,()=>{a[v]=null}),dt(),r=a[s],r?r.p(e,l):(r=a[s]=c[s](e),r.c()),Q(r,1),r.m(i.parentNode,i))},i(h){o||(Q(r),o=!0)},o(h){se(r),o=!1},d(h){h&&g(t),a[s].d(h),h&&g(i)}}}function Pn(n){let e,t,s,r;s=new yn({});let i=n[0]&&n[4].data&&Mt(n);return{c(){e=Ze("div"),t=T("svg"),be(s.$$.fragment),i&&i.c(),this.h()},l(o){e=et(o,"DIV",{class:!0});var c=E(e);t=O(c,"svg",{class:!0,width:!0,height:!0,viewBox:!0,xmlns:!0,"xmlns:xlink":!0});var a=E(t);we(s.$$.fragment,a),i&&i.l(a),a.forEach(g),c.forEach(g),this.h()},h(){u(t,"class","svgCanvas svelte-13981al"),u(t,"width","3000"),u(t,"height","3000"),u(t,"viewBox","0 0 3000 3000"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(e,"class","svgSpace svelte-13981al")},m(o,c){q(o,e,c),I(e,t),ke(s,t,null),i&&i.m(t,null),n[14](t),r=!0},p(o,c){o[0]&&o[4].data?i?(i.p(o,c),c[0]&17&&Q(i,1)):(i=Mt(o),i.c(),Q(i,1),i.m(t,null)):i&&(ft(),se(i,1,1,()=>{i=null}),dt())},i(o){r||(Q(s.$$.fragment,o),Q(i),r=!0)},o(o){se(s.$$.fragment,o),se(i),r=!1},d(o){o&&g(e),Ee(s),i&&i.d(),n[14](null)}}}function $n(n,e,t){let s,r=te,i=()=>(r(),r=ms(c,y=>t(4,s=y)),c);n.$$.on_destroy.push(()=>r());let{appInstance:o}=e,c,a,d,h=null,l,v,w=1;const x=()=>`${new Date().getTime()}${w++}`,N={},C={},k=y=>{let{x:S,y:D,type:f,nexts:$=[],prevs:F=[]}=y;S=S||100,D=D||100;const H=f==="start"||f==="end"?50:5,ue=f==="start"||f==="end"?50:100;return ne(U({},y),{nexts:$,prevs:F,width:ue,height:50,x:S,y:D,tx:30,ty:30,radius:H,text:""})},L=async y=>{if(y.id){c.patch(y);const S=N[y.id];return S&&S.update(y),y}else{if(y.type==="start"&&a){console.log("Has Start");return}if(y.type==="end"&&d){console.log("Has End");return}return y.x<0||y.y<0?void 0:y.type==="connector"?(y.id=x(),y.app=v,c.add(y),y):(y=k(y),y.app=v,y.id=x(),c.add(y),y)}},P=async y=>{d=a=null,y=y,v=y.id,i(t(0,c=dn("nodes",{app:v,nodes:1}))),await c.sync([]),y.isNew&&(L({x:100,y:100,type:"start",name:"--",app:v}),L({x:250,y:100,type:"function",name:"sum",app:v}),L({x:350,y:100,type:"rules",name:"sogologobangbose",app:v}),L({x:550,y:100,type:"human",name:"collate",app:v}),L({x:700,y:100,type:"end",name:"--",app:v}),delete y.isNew)},G=y=>{if(h)switch(h.type){case"function":case"rules":case"human":case"goback":case"start":case"end":const{rect:S}=h;S&&(S.style.stroke="none");break;case"connector":const{_path:D}=h;D&&(D.style.stroke="#cccccc"),D&&(D.style.strokeDasharray="none");break}if(h=y,h)switch(h.type){case"function":case"rules":case"human":case"start":case"goback":case"end":const{rect:S}=h;S&&(S.style.stroke="#fff"),S&&(S.style.strokeDasharray="10,10");break;case"connector":const{_path:D}=h;D&&(D.style.stroke="#fff"),D&&(D.style.strokeDasharray="10,10");break}},Z=y=>{Keys.isDelete(y)},J=()=>{l&&document.addEventListener("keyup",Z,!1)},b=async y=>{await L(y.detail)},R=async y=>{await L(y.detail)},z=async y=>{await L(y.detail)},X=async y=>{const S=await L(y.detail),{start:D,targetAt:f}=S,$=s.data.find(H=>f.x>=H.x&&f.x-H.x<=H.width&&f.y>=H.y&&f.y-H.y<=H.height),F=C[D];if($){const{id:H}=$,ue=C[H];F&&F.setNext(S),ue&&ue.setPrev(S)}else c.remove(S),F&&F.removeNext(S),console.log("no target...")};Ye(()=>{J()});function ae(y,S){W[y?"unshift":"push"](()=>{C[S.id]=y,t(3,C)})}function de(y,S){W[y?"unshift":"push"](()=>{N[S.id]=y,t(2,N)})}function Ae(y){W[y?"unshift":"push"](()=>{l=y,t(1,l)})}return n.$$set=y=>{"appInstance"in y&&t(11,o=y.appInstance)},n.$$.update=()=>{n.$$.dirty[0]&2048&&o&&P(o)},[c,l,N,C,s,L,G,b,R,z,X,o,ae,de,Ae]}class Mn extends pe{constructor(e){super(),ye(this,e,$n,Pn,me,{appInstance:11},null,[-1,-1])}}function qn(n){let e,t,s,r;return s=new Mn({props:{appInstance:n[0]}}),{c(){e=Ze("div"),t=Ze("article"),be(s.$$.fragment),this.h()},l(i){e=et(i,"DIV",{class:!0});var o=E(e);t=et(o,"ARTICLE",{class:!0});var c=E(t);we(s.$$.fragment,c),c.forEach(g),o.forEach(g),this.h()},h(){u(t,"class","canvas-box"),u(e,"class","canvas svelte-1lqfzq")},m(i,o){q(i,e,o),I(e,t),ke(s,t,null),r=!0},p(i,[o]){const c={};o&1&&(c.appInstance=i[0]),s.$set(c)},i(i){r||(Q(s.$$.fragment,i),r=!0)},o(i){se(s.$$.fragment,i),r=!1},d(i){i&&g(e),Ee(s)}}}function Un(n,e,t){let s=0,r;const i=()=>{const o=++s,c=new Date().getTime(),a=`DemoApp${o}`,d={name:a,id:c,description:`${a} description`,isNew:!0};t(0,r=d)};return Ye(()=>{i()}),[r]}class Vn extends pe{constructor(e){super(),ye(this,e,Un,qn,me,{})}}export{Vn as default};
